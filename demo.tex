\documentclass{article}
\usepackage{luacas}

\begin{document}

\[ \CAS{
vars("x", "y")
disp(((x-1)^2+2*(x-1)+1):factor())
} \]

\end{document}