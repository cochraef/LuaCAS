\documentclass{article}
\usepackage{luacas}
\usepackage{forest}
\usepackage{verbatim}

\begin{document}


{\small 
\begin{CAS}
    vars('x')
    disp(int(1/(x^3+1), x))
\end{CAS}
}

On the other hand:

\begin{CAS}
    disp(int(1/(x^2-x+1),x))
\end{CAS}

The irreducible factorizations of the polynomials $\sum_{i=0}^j x^i$ for $j$ from 0 to 10 are:  
\begin{CAS}
    vars('x')
    p = 0
    for i in range(0, 10) do
        p = p + x^i
        disp(factor(p))
    end
\end{CAS}

The polynomial is \get{p}.

\parseforest*{p}
\bracketset{action character = @}
\begin{forest}
    for tree={draw,font=\ttfamily}
    @\forestresult
\end{forest}

\begin{CAS}
    vars('x','y')
    a = x*y
    b = 3*x*y
    c = a+b
\end{CAS}
$\print{c}$

\begin{CAS}
    f = diff(x^2*y+x*y,{x,2},y)
\end{CAS}
\[ \print*{f} = \print{f} \] 
\vprint*{f}

\begin{CAS}
    vars('x','h')
\end{CAS}

\begin{CAS}
    vars('x','h')
    f = x^2
\end{CAS}

\begin{CAS}
    vars('x','h')
    f = x^2
    subs = {[x]=x+h}
    q = (f:substitute(subs) - f)/h
\end{CAS}

\[ \print*{q} \]

\[ \print{q} \] 

\end{document}