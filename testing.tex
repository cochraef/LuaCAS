\documentclass{article}
\usepackage{luacas}


\usepackage{parskip}
\usepackage{comment}


\begin{document}

\luaexec{
    vars('x','y')
    g = x*x+x
}
\printtree{x*x+x}

\luaexec{
    g = g:autosimplify()
    g = g:topolynomial()
    if g:type() == PolynomialRing then 
        tex.print("I'm a polynomial.")
    end
}

\luaexec{
    f = FunctionExpression("f",{x})
    g = FunctionExpression("g",{x})
    h = DD(f*sin(x)+g,x)
}


\printtree[level 1/.style={sibling distance = 3cm}]{h}
\printtree[level 1/.style={sibling distance = 2cm}]{h:autosimplify()}

%\[ \print*{h} = \print{h} \] 

\[ \CAS{
    vars("x")
    local a = ZTable({1, 2, 3})
    local b = ZTable({})
    for k, v in ipairs(a) do
        b[v] = v^2
    end
    disp(b[1])
    disp(b[2])
    disp(b[3])
    disp(R(1/2))
    disp(Q(R(1/2)))
} \]


\printtree{g}
\end{document}