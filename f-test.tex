\documentclass{article}
\usepackage{luacas}
\usepackage{forest}


\begin{document}
Hi
\luaexec{
    vars('x','y')
    f = FunctionExpression('f',{x,y},{Integer.one(),Integer.zero()})
}
\vprint{f}
\[ \print*{f} \] 
\luaexec{
    vars('s','t')
    subs = {[x]=s*t,[y]=t*t}
    g = substitute(subs,f)
}
\[ \print*{g} \] 
\begin{CAS}
    vars('h')
    g = h(t^2)
    g = diff(g,{t,5})
\end{CAS}
\[ \print{g} = \print*{g} \] 

\begin{CAS}
    g = h(x)
    g = int(sin(x),x,0,pi)
\end{CAS}
\[ \print{g} = \print*{g} \] 
\begin{CAS}
    g = diff(sin(x),x)
\end{CAS}
\[ \print{g} = \print*{g} \] 

\end{document}